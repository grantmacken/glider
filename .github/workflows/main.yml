# https://docs.github.com/en/actions/learn-github-actions/expressions
name: CI
on:
  push:
    branches: 'main'
  pull_request:
    branches: 'main'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: checkout repo
      uses: actions/checkout@v3
    - name: install utilities
      run: sudo apt install w3m
    - name: xqerl up and flying 
      run: make up
    - name: add example.com to '/etc/hosts' file
      run: make hosts
    - name: check domain name resolution
      run: w3m -dump http://localhost:8080
    - name: build a xQuery web application
      run: make confs
    - name: bring xqerl down
      run: make down
